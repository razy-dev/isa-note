= 3. 정규화 이론
include::../_toc.adoc[]

== 3.1. 데이터 종속 문제
=== 이상(Anomaly)
삽입이상(Insertion Anomaly)::
삭제이상(Deletion Anomaly)::
갱신이상(Update Anomaly)::

//--

== 3.2. 함수적 종속성(FD: Functional Dependency)
Relation R의 애트리뷰트들의 집합 X의 값이 애트리뷰트들의 집합 Y의 값을 유일하게(Unique) 결정한다면 +
'집합 X 는 집합 Y 를 함수적으로 결정' 한다고 한다.

* X -> Y
** X : 결정자(Determinant)
** Y : 종속자(Dependent)

R = { 학번, 과목, 성적, 학년 }

=== 완전 함수 종속
X = { *학번*, *과목* }, Y = { *성적* } 일 때, Y 는 X 에 대해 *완전 함수 종속*

* 학번과 과목 을 모두 알아야 성적을 알 수 있다.

=== 부분 함수 종속
X = { _학번_, *과목* }, S = { *학년* } 일 때, S 는 X 에 대해 *부분 함수 종속*

* 학번과 과목 중 학번 만으로 학년을 알 수 있다.

=== 이행적 함수 종속
X -> Y 이고 Y -> Z 이며, X -> Z 가 성립할 때

== 3.3. 추론 규칙
=== 3.3.1. 암스트롱의 추론 규칙
* _재귀_ 규칙 : *Y &sube; X* 이면, *X -> Y* 이다
* _부가_ 규칙 : *X -> Y* 이면, *XZ -> YZ* 이다 (XZ = X &cup; Z)
* _이행_ 규칙 : *X -> Y* 이고 *Y -> Z* 이면, *X -> Z* 이다

* 분해 규칙 : *X -> YZ* 이면, *X -> Y* 이고, *X -> Z* 이다
* 합집합 규칙 : *X -> Y* 이고, *X -> Z* 이면, *X -> YZ* 이다 (분해 규칙의 역)
* 의사이행 규칙 : *X -> Y* 이고, *WY -> Z* 이면, *WX -> Z* 이다

=== 3.3.2. 페포(Closure) 이론
X 에 종속되었다고 추론할 수 있는 모든 집합

* X -> YZ 일 때, X+ = X, Y, Z

==== eg>
R = { A, B, C, D }

* { A } -> { C }
* { B } -> { D }
* { A, B } -> { E }

* A+ = { A, C }
* B+ = { B, D }
* { A, B }+ = { #A, C#, #B, D#, #E# }

-> { A, B }+ 가 R 의 모든 속성(Attribute)를 가지므로, R 의 Key 는 { A, B } 가 됨

=== 3.3.3. Cover
* G+ &sube; F+ 이면, F 가 G 를 덮는다(Cover)
* G+ = F+ 이면, G 와 F 는 동등하다.

=== 3.3.4. 함수적 종속성들의 집합 F의 최소(Minimal)
* 조건 1. F 의 모든 종속성의 오른쪽 속성(Attribute)이 1개이다 (오른쪽 한개로)
* 조건 2. 대체 가능한 함수적 종속성이 없다 (왼쪽을 1개로)
* 조건 3. 제거 가능한 함수적 종속성이 없다 (중복 제거)

=== 3.3.5. Minimal Cover
E = { B -> A, D -> A, AB -> D} 일때

조건 1. ::
* 모든 종속성의 오른쪽 속성이 1개 이다. OK

조건 2. ::
* AB -> D 를 A -> D 또는 B -> D 로 대치 가능 한가?
* B -> A = BB -> AB = B -> AB (부가규칙)
* B -> AB 이고, AB -> D 이므로 B -> D (이행규칙)
* E = { B -> A, D -> A, [.line-through]#AB -> D# #B -> D# }

조건 3. ::
* B -> D 이고, D -> A 이므로 *B -> A* (이행규칙)
* E = { [.line-through]#B -> A#, D -> A, B -> D }

== 3.4. 정규화
무손실 분해(Lossless Decomposition):: 저장 정보 손실이 없어야 함
종속 보전 분해:: 함수적 종속성 유지 되어야 함

//--

=== 3.4.1. 제1 정규형(1NF)
==== 제1 정규형(1NF)
* R 의 모든 도메인이 원자값(Atomic Value)으로 되 있을 때
* 복합, 다치, 중첩 릴레이션 등 비원자적(Non-Atomic) 속성(Attribute)을 허용 하지 않음

==== 제1 정규화 결과
* 부분 함수종속

==== 제1 정규형(1NF) 문제점
* 삽입이상
* 갱신이상
* 삭제이상

=== 3.4.2. 제2 정규형(2NF)
==== 제2 정규형(2NF)
* 부분함수종속 제거
* R 이 제1 정규형 이고, 모든 속성(Attribute) 가 ##기본키##에 #완전함수종속# 일 때

==== 제2 정규화 결과
* 이행적 함수종속

==== 제2 정규형(2NF) 문제점
* 삽입이상
* 갱신이상
* 삭제이상

=== 3.4.3. 제3 정규형(3NF)
==== 제3 정규형(3NF)
* 이행적 함수종속 제거

==== 제3 정규화 결과

==== 제3 정규형(3NF) 문제점

=== 3.4.4. BCNF
=== 3.4.5. 제4 정규형(4NF)
=== 3.4.6. 제5 정규형(5NF)
=== 3.4.7 정규화 단계
=== 3.4.8. 반정규화(De-Normalization)
=== 3.4.9. 연결함정(Connection Trap)
=== 3.4.10. 부채꼴함정(Fan Trap)